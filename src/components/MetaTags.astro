---
import { SITE_CONFIG, getCanonicalUrl } from '../config/site';

interface Props {
  title: string;
  description: string;
  schema?: object;
  image?: string;
  imageAlt?: string;
}

const {
  title,
  description,
  schema,
  image = SITE_CONFIG.seo.defaultImage,
  imageAlt = SITE_CONFIG.seo.defaultImageAlt,
}: Props = Astro.props;

const pathname = Astro.url.pathname;
const fullUrl = getCanonicalUrl(pathname);
const imageUrl = image.startsWith('http')
  ? image
  : `${SITE_CONFIG.domain}${image}`;
---

<link rel="sitemap" href={`${SITE_CONFIG.domain}/sitemap-index.xml`} />
<link rel="canonical" href={fullUrl} />
<title>{title}</title>
<meta name="description" content={description} />

<!-- Open Graph tags -->
<meta property="og:title" content={title} />
<meta property="og:type" content="website" />
<meta property="og:url" content={fullUrl} />
<meta property="og:description" content={description} />
<meta property="og:image" content={imageUrl} />
<meta property="og:image:width" content="850" />
<meta property="og:image:height" content="425" />
<meta property="og:image:alt" content={imageAlt} />

<!-- Twitter tags -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content={title} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={imageUrl} />
<meta name="twitter:image:alt" content={imageAlt} />
<meta name="twitter:site" content={SITE_CONFIG.social.twitter} />
<meta name="twitter:creator" content={SITE_CONFIG.social.twitter} />

<!-- Schema -->
{
  schema && (
    <script type="application/ld+json" set:html={JSON.stringify(schema)} />
  )
}
