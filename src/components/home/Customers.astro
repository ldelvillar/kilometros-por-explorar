---
import { getCollection } from 'astro:content';
import FeaturedCustomerCard from '@/components/customers/FeaturedCustomerCard.astro';
import HalfArrow from '@/assets/halfArrow.svg';
import Arrow from '@/assets/arrow.svg';

const customers = await getCollection('customers', ({ data }) => data.featured);
---

<section class="max-w-7xl mx-auto px-4 py-16">
  <h2 class="text-3xl font-bold text-gray-800 mb-8">Viajeros satisfechos</h2>

  <div class="grid md:grid-cols-3 gap-8">
    {
      customers.map(customer => (
        <FeaturedCustomerCard customer={customer} loading="lazy" />
      ))
    }
  </div>

  <a
    href="/viajeros"
    class="group mt-12 mx-auto w-fit px-4 py-3 flex items-center gap-2 font-semibold text-white rounded-lg bg-primary hover:bg-primary/90 transition"
  >
    <span>Ver todas las historias</span>
    <div class="relative size-4">
      <HalfArrow
        class="size-4 absolute inset-0 transition-opacity duration-300 group-hover:opacity-0"
      />
      <Arrow
        class="size-4 absolute inset-0 transition-all duration-300 opacity-0 group-hover:opacity-100 group-hover:translate-x-1"
      />
    </div>
  </a>
</section>
