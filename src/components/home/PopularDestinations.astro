---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';

const featuredDestinations = await getCollection('destinations', ({ data }) => {
  return data.featured === true;
});
---

<section class="mx-auto max-w-7xl px-4 py-16">
  <h2 class="mb-8 text-3xl font-bold text-gray-800">Destinos populares</h2>

  <div class="grid gap-6 md:grid-cols-3">
    {
      featuredDestinations.map(destination => (
        <a href={`destinos/${destination.id.replace('.md', '')}`} class="group">
          <article class="space-y-4">
            <Image
              src={destination.data.image}
              alt={destination.data.name}
              class="h-48 w-full rounded-xl object-cover shadow-md transition-transform duration-300 group-hover:scale-105"
              width={400}
              height={300}
              loading="lazy"
            />
            <div class="space-y-2">
              <h3 class="text-lg font-medium text-gray-800">
                {destination.data.name}
              </h3>
              <p class="text-sm text-gray-600">
                {destination.data.shortDescription}
              </p>
            </div>
          </article>
        </a>
      ))
    }
  </div>
</section>
