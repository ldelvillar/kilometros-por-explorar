---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import HalfArrow from '@/assets/halfArrow.svg';

interface Props {
  destination: CollectionEntry<'destinations'>;
  loading?: 'eager' | 'lazy';
}

const { destination, loading = 'lazy' } = Astro.props;
---

<a
  href={`/destinos/${destination.id.replace('.md', '')}`}
  class="group destination-card block"
  data-category={destination.data.category}
>
  <article
    class="relative h-full overflow-hidden rounded-3xl border border-gray-100 bg-white transition-all duration-300 hover:border-[#12a3ed]/30 hover:shadow-xl"
  >
    <div class="relative h-64 overflow-hidden">
      <Image
        src={destination.data.image}
        alt={destination.data.name}
        class="h-full w-full object-cover transition-all duration-700 group-hover:scale-105 group-hover:brightness-110"
        width={400}
        height={300}
        loading={loading}
      />
      <!-- Gradient overlay always visible -->
      <div
        class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"
      >
      </div>
      <!-- Destination name overlaid on image -->
      <div class="absolute right-0 bottom-0 left-0 p-6">
        <h3
          class="destination-name text-2xl font-bold text-white drop-shadow-lg transition-transform duration-300 group-hover:translate-y-[-4px]"
        >
          {destination.data.name}
        </h3>
      </div>
    </div>
    <div class="flex h-44 flex-col justify-between p-6">
      <p
        class="destination-description line-clamp-3 text-sm leading-relaxed text-gray-700"
      >
        {destination.data.shortDescription}
      </p>
      <div
        class="flex items-center justify-between border-t border-gray-100 pt-4 text-sm font-semibold tracking-wide text-[#12a3ed] uppercase transition-colors duration-300 group-hover:text-[#0d7ab8]"
      >
        <span class="text-xs">Ver destino</span>
        <HalfArrow
          class="h-5 w-5 transition-transform duration-300 group-hover:translate-x-2"
        />
      </div>
    </div>
  </article>
</a>
