---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import HalfArrow from '@/assets/halfArrow.svg';
import Arrow from '@/assets/arrow.svg';

interface Props {
  post: CollectionEntry<'blog'>;
  loading: 'eager' | 'lazy';
}

const { post, loading } = Astro.props;
---

<article class="group h-full overflow-hidden rounded-2xl bg-white shadow-lg">
  <a href={`/blog/${post.id.replace('.md', '')}`} class="flex h-full flex-col">
    <div class="h-52 overflow-hidden">
      <Image
        src={post.data.image}
        width="600"
        height="600"
        alt={post.data.title}
        class="h-full w-full object-cover transition-transform duration-700 ease-out group-hover:scale-110"
        loading={loading}
      />
    </div>

    <div class="flex flex-1 flex-col p-6 text-start">
      <h2 class="text-primary mb-4 text-2xl font-bold">
        {post.data.title}
      </h2>
      <p class="mb-4 flex-1 text-neutral-800">
        {post.data.description}
      </p>
      <div
        class="mb-2 flex items-center justify-between text-sm text-neutral-500"
      >
        <span>
          {
            new Date(post.data.date).toLocaleDateString('es-ES', {
              day: '2-digit',
              month: 'short',
              year: 'numeric',
            })
          }
        </span>
        <span class="capitalize">{post.data.author}</span>
      </div>
      <div class="text-primary flex items-center gap-2 font-semibold">
        <span>Leer m√°s</span>
        <div class="relative size-4">
          <HalfArrow
            class="absolute inset-0 size-4 transition-opacity duration-300 group-hover:opacity-0"
          />
          <Arrow
            class="absolute inset-0 size-4 opacity-0 transition-all duration-300 group-hover:translate-x-1 group-hover:opacity-100"
          />
        </div>
      </div>
    </div>
  </a>
</article>
